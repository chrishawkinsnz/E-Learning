<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Log In Page</title>
</head>
<h1>Log In</h1>
<style>
.error-message {
  color: red;
}
</style>
	<script type="text/javascript" src="js/libraries/angular/angular.js"></script>
	<script type="text/javascript" src="jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/controllers.js"></script>
	<script type="text/javascript" src="js/services.js"></script>
<form novalidate ng-app name="login">

  	<div class="error-message"
  		ng-show="login.username.$dirty && login.username.$error.required">
  		The username is required
  	</div>
	<div class="error-message" ng-show="login.username.$error.minlength">
		The username should be more than 2 symbols
	</div>
	<div class="error-message"
		ng-show="login.username.$error.maxlength">
		The username should not be more than 15 symbols
	</div>
	<label for="username">User</label>
	<input type="text" name="username" ng-model="username" ng-minlength="3" ng-maxlength="15" required />
	<br />


	<div class="error-message"
		ng-show="login.password.$dirty && login.password.$error.required">
		The password is required
	</div>
	<div class="error-message" ng-show="login.password.$error.pattern">
		The password should containing at least 8 characters, 1 number, 1 upper and 1 lowercase
	</div>
	<label for="password">Password</label>
	<input type="password" name="password" ng-model="password" required
	ng-pattern="/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/" />


	<input type="button" id="submit" value="Submit">
	<script type="text/javascript">
    document.getElementById("submit").onclick = confirm;
    function confirm() {
	$.ajax({
		url:'http://shrouded-earth-7234.herokuapp.com/elearningserver.php',
		type: 'post',
		data: {"funcName":"checkPassword","username":login.username.value,"password":login.password.value},
		success: function(response){
			alert(response);

			if(response=="true"){
			//remember my deets
				sessionStorage.setItem('username',login.username.value);
				sessionStorage.setItem('password',login.password.value);
 				window.location = "http://shrouded-earth-7234.herokuapp.com/loggedInPage.html"; 
			}
			console.log(response);
			console.log("username from session"+sessionStorage.getItem('username'));
			console.log("password from session"+sessionStorage.getItem('password'));

		}

	});
    }
</script>
</form>
</html>
