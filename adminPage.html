<html ng-app="admin">
  <head>
    <title></title>
    <meta content="">
    <style></style>
  </head>
  <body>
	<div ng-controller = "adminCtrl" ng-init = "getAllResults()" ng-show="safeToShow">
	<button id="logoutBtn" onclick="logout()">LOGOUT</button>
	<button id="toQuizInsertPage" onclick="toQuizInsertPage()">To Quiz Creator</button>
	<h1>Results Query</h1>
		<br>

		
	<div style="width:200px;height:100px;border:1px solid blue;">
	First Name <input id="fnameinput" type="text">
	<br>
	Last Name <input id="lnameinput" type="text">
	<br>
	Quiz <input id="quizinput" type="text">
	<br>
	Course Code <input id="courseinput" type="text">
	<br>
	<button id="submit" ng-click="getQueryResults()">Query</button>

	<br>
	<br>
	<h1>Results</h1>
	<table style="width:90%" border="1">
	    <tr>
	      <td><b>First Name</b></td>
	      <td><b>Last Name</b></td>
	      <td><b>Quiz</b></td>
	      <td><b>Course Code</b></td>
	      <td><b>Score</b></td>
	      <td><b>Time Taken</b></td>
	      <td><b>Date Taken</b></td>
	    </tr>

	    <tr ng-repeat="result in results track by $index">
	      <td>{{result.fname}}</td>
	      <td>{{result.lname}}</td>
	      <td>{{result.quizname}}</td>
	      <td>{{result.coursecode}}</td>
	      <td>{{result.score}}</td>
	      <td>{{result.timetaken}}</td>
	      <td>{{result.datetaken}}</td>
	    </tr>

	   </table>
	</div>
	
	<br>
	<div style="width:200px;height:100px;border:1px solid blue;">
	<h1>Quiz Averages</h1>
	<table style="width:90%" border="1" ng-init="getQuizAverages()">
	    <tr>
	      <td><b>Quiz</b></td>
	      <td><b>Course Code</b></td> 
	      <td><b>Average Score</b></td> 
	      <td><b>Number of attempts</b></td> 
	    </tr>
	    
	    <tr ng-repeat="quizavg in quizavgs">
	      <td>{{quizavg.quizname}}</td>
	      <td>{{quizavg.coursecode}}</td> 
	      <td>{{quizavg.average_score}}</td>
	      <td>{{quizavg.number_taken}}</td>
	    </tr>
	   </table>
	</div>
	
	<br>
	<div style="width:200px;height:100px;border:1px solid blue;">
	<h1>Student Averages</h1>
	<table style="width:90%" border="1" ng-init="getStudentAverages()">
	    <tr>
	      <td><b>First Name</b></td>
	      <td><b>Last Name</b></td> 
	      <td><b>Email</b></td> 
	      <td><b>Average Score</b></td> 
	      <td><b>Number of attempts</b></td> 
	    </tr>
	    
	    <tr ng-repeat="studentavg in studentavgs">
	      <td>{{studentavg.fname}}</td>
	      <td>{{studentavg.lname}}</td> 
	      <td>{{studentavg.emailaddress}}</td> 
	      <td>{{studentavg.average_score}}</td>
	      <td>{{studentavg.number_taken}}</td>
	    </tr>
	   </table>
	</div>
	<script>

		function logout() {
			sessionStorage.removeItem("username");
			sessionStorage.removeItem("password");
			sessionStorage.clear();
			window.location = "http://shrouded-earth-7234.herokuapp.com/login-fancy.html";
		}

		function toQuizInsertPage() {
			window.location = "http://shrouded-earth-7234.herokuapp.com/quizInsert.html";
		}




	</script>
	</div>
	<script type="text/javascript" src="js/libraries/angular/angular.js"></script>
	<script type="text/javascript" src="jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="question.js"></script>
	<script type="text/javascript" src="js/admin/app.js"></script>
	<script type="text/javascript" src="js/admin/controllers.js"></script>
	<script type="text/javascript" src="js/admin/services.js"></script>
</body>
</html>
